<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
  <title>Riwayat Transaksi</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/framework7@8.3.0/framework7-bundle.min.css">

  <style>
    /* ---------------------------------------
        CUSTOM THEME COLOR FEELING
    ---------------------------------------- */
    :root {
      --f7-theme-color: #ff6b22;
      --f7-theme-color-rgb: 255, 107, 34;
      --f7-theme-color-shade: #e55a15;
      --f7-theme-color-tint: #ff7c3b;
    }

    body {
      background-color: #eee;
    }

    #app {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      background-color: #f7f7f8;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }

    /* NAVBAR */
    .navbar-bg {
      background-color: var(--f7-theme-color) !important;
    }
    .navbar .title,
    .navbar .link {
      color: #fff !important;
    }
    .icon-back {
      filter: brightness(0) invert(1);
    }

    /* ORDER CARD */
    .order-card {
      margin: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .order-card .card-header {
      padding: 10px 15px;
      border-bottom: 1px solid #eee;
      font-size: 14px;
    }

    .order-card .card-footer {
      padding: 8px 15px;
    }

    .price-tag {
      font-weight: 800;
      font-size: 18px;
      color: #333;
    }

    .status-badge {
      padding: 6px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
      color: #fff;
    }
  </style>
</head>

<body>
  <div id="app">
    <div class="view view-main">
      <div class="page" data-name="order-history">

        <!-- NAVBAR -->
        <div class="navbar">
          <div class="navbar-bg"></div>
          <div class="navbar-inner sliding">
            <div class="left">
              <a href="#" class="link back">
                <i class="icon f7-icons">MealStation</i>
                <span class="if-not-md">Kembali</span>
              </a>
            </div>
            <div class="title">Riwayat Transaksi</div>
          </div>
        </div>

        <div class="page-content ptr-content" data-ptr-mousewheel="true">

          <!-- FILTER SECTION -->
          <div class="block-header margin-top-half">
            <div class="segmented segmented-raised">
              <button class="button button-fill tab-link tab-link-active" data-filter="all">Semua</button>
              <button class="button tab-link" data-filter="pending">Bayar</button>
              <button class="button tab-link" data-filter="completed">Selesai</button>
              <button class="button tab-link" data-filter="cancelled">Batal</button>
            </div>
          </div>

          <!-- ORDER LIST CONTAINER -->
          <div id="order-list-container" class="cards-list margin-top-half"></div>

        </div>
      </div>
    </div>
  </div>

  <!-- FRAMEWORK7 JS -->
  <script src="https://cdn.jsdelivr.net/npm/framework7@8.3.0/framework7-bundle.min.js"></script>

  <script>
    var app = new Framework7({
      el: '#app',
      theme: 'ios',
      colors: { primary: '#ff6b22' }
    });

    var $$ = Dom7;

    /* ------------------------------
       DATA PESANAN
    ------------------------------ */
    const orders = [
      {
        id: '#ORD-8832',
        date: '18 Nov 2025',
        total: 'Rp 150.000',
        items: 'Nasi Goreng Spesial (2), Es Teh Manis (2)',
        status: 'completed',
        statusLabel: 'Selesai'
      },
      {
        id: '#ORD-8833',
        date: '17 Nov 2025',
        total: 'Rp 75.000',
        items: 'Ayam Bakar Madu (1)',
        status: 'pending',
        statusLabel: 'Menunggu Bayar'
      },
      {
        id: '#ORD-8834',
        date: '10 Nov 2025',
        total: 'Rp 300.000',
        items: 'Paket Keluarga A (1)',
        status: 'cancelled',
        statusLabel: 'Dibatalkan'
      }
    ];

    /* ------------------------------
       HELPER FUNCTIONS
    ------------------------------ */
    function getStatusColor(status) {
      if (status === 'completed') return 'bg-color-green';
      if (status === 'pending') return 'bg-color-orange';
      if (status === 'cancelled') return 'bg-color-red';
      return 'bg-color-gray';
    }

    function getQuickActionButton(status) {
      if (status === 'pending') {
        return '<button class="button button-small button-fill color-green">Bayar Sekarang</button>';
      }
      if (status === 'completed') {
        return '<button class="button button-small button-outline color-orange">Pesan Lagi</button>';
      }
      if (status === 'cancelled') {
        return '<button class="button button-small button-outline color-gray">Hubungi CS</button>';
      }
      return '';
    }

    /* ------------------------------
       RENDER ORDER LIST
    ------------------------------ */
    function renderOrders(data) {
      let html = '';

      data.forEach(order => {
        html += `
          <div class="card order-card" data-status="${order.status}">
            <div class="card-header display-flex justify-content-space-between align-items-center">
              <span class="font-weight-bold text-color-black">${order.id}</span>
              <span class="text-color-gray font-size-small">${order.date}</span>
            </div>

            <div class="card-content card-content-padding">
              <a href="#" class="item-link no-chevron">
                <div class="text-color-black">${order.items}</div>
                <div class="text-color-gray font-size-small margin-top-half">
                  <span class="price-tag">${order.total}</span>
                </div>
              </a>
            </div>

            <div class="card-footer display-flex justify-content-space-between align-items-center">
              <span class="status-badge ${getStatusColor(order.status)}">${order.statusLabel}</span>
              ${getQuickActionButton(order.status)}
            </div>
          </div>
        `;
      });

      $$('#order-list-container').html(html);
    }

    /* ------------------------------
       FILTERING
    ------------------------------ */
    function filterOrders(status) {
      $$('.order-card').show();

      if (status !== 'all') {
        $$(`.order-card:not([data-status="${status}"])`).hide();
      }
    }

    /* ------------------------------
       INIT
    ------------------------------ */
    renderOrders(orders);

    $$('.segmented .button').on('click', function () {
      $$('.segmented .button').removeClass('button-fill tab-link-active');
      $$(this).addClass('button-fill tab-link-active');

      filterOrders($$(this).data('filter'));
    });
  </script>
</body>
</html>
